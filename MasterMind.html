<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Windows-31J"/>
<title>MasterMind相手役</title>
<script type="text/javascript">
var gPgmQ = "";
var gaChar = new Array
(
	"0",
	"1",
	"2",
	"3",
	"4",
	"5",
	"6",
	"7",
	"8",
	"9"
);
var gaExpect;
var gaHistory;
var gIdxHistory;
var gPosition;
var gNumber;
var gDebug = false;
//var gDebug = true;
var gPgmHintHit;
var gPgmHintBlow;
var gSkip;
var gPlayEnd;

var STATUS_FIND_NUMBER_CONTINUE = -1;
var STATUS_FIND_NUMBER_END = -2;
var STATUS_FIND_NUMBER_ERROR = -3;

var RET_ERROR = -1;

// 勝敗リセット
function K_PlayReset()
{
	document.forms[0].win.value = "0";
	document.forms[0].lose.value = "0";
	document.forms[0].draw.value = "0";
}

// 勝敗判定
function K_Judge()
{
	var aPgmTry;
	var aYouTry;
	var Loop;
	
	// 各試行が空か
	if ((document.forms[0].pgm_try.value == "") || (document.forms[0].you_try.value == ""))
	{
		return "NOT_END";
	}
	aPgmTry = document.forms[0].pgm_try.value.split("\n");
	// 最新試行探索ループ
	for (Loop = aPgmTry.length - 1; Loop >= 0; Loop--)
	{
		if (aPgmTry[Loop].length == 20)
		{
			break;
		}
	}
	aYouTry = document.forms[0].you_try.value.split("\n");
	// 勝敗がついていないか
	if ((aPgmTry[Loop].charAt(8) != "4") && (aYouTry[Loop].charAt(8) != "4"))
	{
		return "NOT_END";
	}
	// 引き分けか
	if ((aPgmTry[Loop].charAt(8) == "4") && (aYouTry[Loop].charAt(8) == "4"))
	{
		return "DRAW";
	}
	// プレイヤの勝ちか
	if (aYouTry[Loop].charAt(8) == "4")
	{
		return "YOU";
	}
	// プログラムの勝ちの場合に到達
	return "PGM";
}

// 次ゲーム開始
function K_PlayNext()
{
	var Ret;
	
	// 前ゲームがあるか
	if (gPgmQ != "")
	{
		// プレイヤの問題が入力されているか
		if (document.forms[0].you_q.value != "")
		{
			Ret = K_VerifyYouHint();
			// 間違いがあるか
			if (Ret == "BAD")
			{
				alert("プレイヤのヒントに間違いがあるため無効ゲームとなります。");
			}
		}
		else
		{
			alert("前ゲームのプレイヤのヒントの検証を行うため、プレイヤの出題を入力して下さい。");
			return;
		}
		// ヒント間違いがないか
		if (Ret != "BAD")
		{
			// 履歴検証
			Ret = K_Judge();
		}
		// 判定で分岐
		switch (Ret)
		{
			case "NOT_END":
			{
				// 無効ゲーム確認&キャンセル押下
				if (!confirm("勝敗がついていないため、無効ゲームとなりますがよいですか？"))
				{
					return;
				}
				break;
			}
			case "DRAW":
			{
				document.forms[0].draw.value = document.forms[0].draw.value * 1 + 1;
				break;
			}
			case "YOU":
			{
				document.forms[0].win.value = document.forms[0].win.value * 1 + 1;
				break;
			}
			case "PGM":
			{
				document.forms[0].lose.value = document.forms[0].lose.value * 1 + 1;
				break;
			}
			case "BAD":
			{
				break;
			}
			default:
			{
				alert("エラーが発生しました。");
				return;
			}
		}
	}
	K_ClearView();
	K_MakeExpectTable();
	K_PgmQ();
if (gDebug == "true")
{
	document.forms[0].pgm_q.value = gPgmQ;
}
	gNumber = "";
	gPosition = "----";
	gNeedLess = "";
	gPlayEnd = "false";
	document.forms[0].pgm_expect.value = K_PgmExpect();
}

// 表示クリア
function K_ClearView()
{
	document.forms[0].you_hint_hit.value = "";
	document.forms[0].you_hint_blow.value = "";
	document.forms[0].you_expect.value = "";
	document.forms[0].you_try.value = "";
//	document.forms[0].pgm_hint_hit.value = "";
//	document.forms[0].pgm_hint_blow.value = "";
	document.forms[0].pgm_expect.value = "";
	document.forms[0].pgm_try.value = "";
	document.forms[0].you_q.value = "";
	document.forms[0].pgm_q.value = "";
}

// 予想テーブル作成
function K_MakeExpectTable()
{
	var aTable;
	var Loop
	var Idx;
	
	gaExpect = new Array();
	// 予想テーブルが指定されているか
	if (document.forms[0].expect_table.value != "")
	{
		// 指定を採用するか確認
		if (confirm("予想テーブルの指定を使用しますか？"))
		{
			// 設定ループ
			for (Loop = 0; Loop < 10; Loop++)
			{
				gaExpect.push(document.forms[0].expect_table.value.charAt(Loop * 2));
			}
			return;
		}
	}
	aTable = gaChar.join(",").split(",");
	for (Loop = 0; Loop < 9; Loop++)
	{
		Idx = Math.floor(Math.random() * (10 - Loop));
		gaExpect.push(aTable[Idx]);
		// 最大値ではないか
		if (Idx != 9 - Loop)
		{
			aTable[Idx] = aTable[9 - Loop];
		}
		
	}
	gaExpect.push(aTable[0]);
if (gDebug)
{
	document.forms[0].expect_table.value = gaExpect.join(",");
}
}

// 問題作成
function K_PgmQ()
{
	var Loop;
	var aTable;
	var Idx;
	
	gPgmQ = "";
	aTable = gaChar.join(",").split(",");
	// 問題作成ループ
	for (Loop = 0; Loop < 4; Loop++)
	{
		Idx = Math.floor(Math.random() * (10 - Loop));
		gPgmQ += aTable[Idx];
		// 最大値ではないか
		if (Idx != 9 - Loop)
		{
			aTable[Idx] = aTable[9 - Loop];
		}
	}
}

// 次試行
function K_Try()
{
	var Ret;
	var RetHint;
	var Tmp;
	
	RetHint = K_PgmHint(gPgmQ, document.forms[0].you_expect.value);
	Ret = K_CheckInput();
	// 状態分岐
	switch (Ret)
	{
		case 0:
		{
			return;
		}
		case 1:
		{
			break;
		}
		default:
		{
			// ゲームが終わったばかりか
			if (gPlayEnd == "false")
			{
				// 試行追記
				document.forms[0].pgm_try.value += document.forms[0].pgm_expect.value + " -> " + document.forms[0].you_hint_hit.value + " Hit " + document.forms[0].you_hint_blow.value + " Blow\n";
				document.forms[0].you_try.value += document.forms[0].you_expect.value.toUpperCase() + " -> " + RetHint.Hit + " Hit " + RetHint.Blow + " Blow\n";
				document.forms[0].pgm_q.value = gPgmQ;
			}
			gPlayEnd = "true";
			alert("勝敗がつきました。");
			return;
		}
	}
	// プレイヤが勝ったか
	if (RetHint.Hit == 4)
	{
		// ゲームが終わったばかりか
		if (gPlayEnd == "false")
		{
			// 試行追記
			document.forms[0].pgm_try.value += document.forms[0].pgm_expect.value + " -> " + document.forms[0].you_hint_hit.value + " Hit " + document.forms[0].you_hint_blow.value + " Blow\n";
			document.forms[0].you_try.value += document.forms[0].you_expect.value.toUpperCase() + " -> " + RetHint.Hit + " Hit " + RetHint.Blow + " Blow\n";
			document.forms[0].pgm_q.value = gPgmQ;
		}
		gPlayEnd = "true";
		alert("勝敗がつきました。");
		return;
	}
	Tmp = document.forms[0].pgm_try.value;
	// 試行追記
	document.forms[0].pgm_try.value += document.forms[0].pgm_expect.value + " -> " + document.forms[0].you_hint_hit.value + " Hit " + document.forms[0].you_hint_blow.value + " Blow\n";
	// 次試行確認
	if (!confirm("次の試行に移ってもよいですか？"))
	{
		document.forms[0].pgm_try.value = Tmp;
		return;
	}
	Ret = K_PgmExpect();
	// エラー発生か
	if (Ret == RET_ERROR)
	{
		alert("エラーが発生しました。");
		return;
	}
	document.forms[0].pgm_expect.value = Ret;
	// 試行追記
	//document.forms[0].you_try.value += document.forms[0].you_expect.value.toUpperCase() + " -> " + document.forms[0].pgm_hint_hit.value + " HIT " + document.forms[0].pgm_hint_blow.value + " BLOW\n";
	document.forms[0].you_try.value += document.forms[0].you_expect.value.toUpperCase() + " -> " + RetHint.Hit + " Hit " + RetHint.Blow + " Blow\n";
	document.forms[0].you_hint_hit.value = "";
	document.forms[0].you_hint_blow.value = "";
	document.forms[0].you_expect.value = "";
}

// 入力チェック
function K_CheckInput()
{
	var Idx;
	var Tmp;
	var Upper;

	// プレイヤーのヒントが入力されていないか
	if ((document.forms[0].you_hint_hit.value == "") || (document.forms[0].you_hint_blow.value == ""))
	{
		alert("プレイヤーのヒントが入力されていません。");
		return 0;
	}
	// プレイヤーのヒントのヒットの妥当性分岐
	switch (document.forms[0].you_hint_hit.value)
	{
		case "0":
		{
			break;
		}
		case "1":
		{
			break;
		}
		case "2":
		{
			break;
		}
		case "3":
		{
			break;
		}
		case "4":
		{
			return 2;
		}
		default:
		{
			alert("プレイヤーのヒントが間違っています。ヒントは'0'、'1'、'2'、'3'、'4'のいずれかを入力して下さい。");
			return 0;
		}
	}
	// プレイヤーのヒントのブローの妥当性分岐
	switch (document.forms[0].you_hint_blow.value)
	{
		case "0":
		{
			break;
		}
		case "1":
		{
			break;
		}
		case "2":
		{
			break;
		}
		case "3":
		{
			break;
		}
		case "4":
		{
			break;
		}
		default:
		{
			alert("プレイヤーのヒントが間違っています。ヒントは'0'、'1'、'2'、'3'、'4'のいずれかを入力して下さい。");
			return 0;
		}
	}
	// プレイヤーの予想が４文字ではないか
	if (document.forms[0].you_expect.value.length != 4)
	{
		alert("プレイヤーの予想は４文字で指定して下さい。");
		return 0;
	}
	Upper = document.forms[0].you_expect.value.toUpperCase();
	//　１文字目と同じ文字があるか
	if ((Upper.charAt(0) == Upper.charAt(1)) || (Upper.charAt(0) == Upper.charAt(2)) || (Upper.charAt(0) == Upper.charAt(3)))
	{
		alert("プレイヤーの予想に文字の重複があります。");
		return 0;
	}
	//　２文字目と同じ文字があるか
	if ((Upper.charAt(1) == Upper.charAt(2)) || (Upper.charAt(1) == Upper.charAt(3)))
	{
		alert("プレイヤーの予想に文字の重複があります。");
		return 0;
	}
	//　３文字目と同じ文字があるか
	if (Upper.charAt(2) == Upper.charAt(3))
	{
		alert("プレイヤーの予想に文字の重複があります。");
		return 0;
	}
	Tmp = gaChar.join(",");
	// 無効な文字が指定されているか
	for (Idx = 0; Idx < 4; Idx++)
	{
		if ((Tmp.indexOf(document.forms[0].you_expect.value.charAt(Idx).toUpperCase()) == -1) || (document.forms[0].you_expect.value.charAt(Idx) == ","))
		{
			return 0;
		}
	}
	return 1;
}

// プログラムのヒント
function K_PgmHint(question, expect)
{
	var Question;
	var Expect;
	var Ret;
	
	Question = question.toUpperCase();
	Expect = expect.toUpperCase();
	Ret = new K_Hint();
	Ret.Hit = 0;
	Ret.Blow = 0;
	// １文字目が一致しているか
	if (Question.charAt(0) == Expect.charAt(0))
	{
		Ret.Hit++;
	}
	// ２文字目が一致しているか
	if (Question.charAt(1) == Expect.charAt(1))
	{
		Ret.Hit++;
	}
	// ３文字目が一致しているか
	if (Question.charAt(2) == Expect.charAt(2))
	{
		Ret.Hit++;
	}
	// ４文字目が一致しているか
	if (Question.charAt(3) == Expect.charAt(3))
	{
		Ret.Hit++;
	}
	// １文字目がどこかにあるか
	if ((Expect.charAt(0) == Question.charAt(1)) || (Expect.charAt(0) == Question.charAt(2)) || (Expect.charAt(0) == Question.charAt(3)))
	{
		Ret.Blow++;
	}
	// ２文字目がどこかにあるか
	if ((Expect.charAt(1) == Question.charAt(0)) || (Expect.charAt(1) == Question.charAt(2)) || (Expect.charAt(1) == Question.charAt(3)))
	{
		Ret.Blow++;
	}
	// ３文字目がどこかにあるか
	if ((Expect.charAt(2) == Question.charAt(0)) || (Expect.charAt(2) == Question.charAt(1)) || (Expect.charAt(2) == Question.charAt(3)))
	{
		Ret.Blow++;
	}
	// ４文字目がどこかにあるか
	if ((Expect.charAt(3) == Question.charAt(0)) || (Expect.charAt(3) == Question.charAt(1)) || (Expect.charAt(3) == Question.charAt(2)))
	{
		Ret.Blow++;
	}
	return Ret;
}

// プログラムの予想
function K_PgmExpect()
{
	var Ret;
	
	K_GetHistory();
	Ret = "";
	// 種類探索が終わっていないか
	if (gNumber.length < 4)
	{
		gNumber = "";
		Ret = K_FindNumber();
		// 種類探索の状態分岐
		switch (Ret)
		{
			case STATUS_FIND_NUMBER_END:
			{
				gSkip = gIdxHistory;
				break;
			}
			case STATUS_FIND_NUMBER_ERROR:
			{
				return RET_ERROR;
			}
			default:
			{
				return Ret;
			}
		}
	}
	Ret = K_FindPosition();
	return Ret;
}

// ヒント確認
function K_GetHint(expect)
{
	var Loop;
	
	// 戻り値確保
	Ret = new K_Hint();
	// 履歴探索ループ
	for (Loop = 0; Loop < gaHistory.length; Loop++)
	{
		if (gaHistory[Loop].substr(0, 4) == expect)
		{
			Ret.Hit = gaHistory[Loop].charAt(8);
			Ret.Blow = gaHistory[Loop].charAt(14);
			return Ret;
		}
	}
	return;
}

// ヒントオブジェクトコンストラクタ
function K_Hint()
{
	this.Hit = -1;
	this.Blow = -1;
}

// 位置特定
function K_FindPosition()
{
	var Hit;
	var CntPosition
	var IdxA;
	var IdxB;
	var Ret;
	var Limit;
	var Expect;
	
	// 種類探索が終わっていないか
	if (gNumber.length != 4)
	{
		return RET_ERROR;
	}
	// 位置ヒントの長さが４ではないか
	if (gPosition.length != 4)
	{
		return RET_ERROR;
	}
	// 次予想作成
	Expect = gPosition;
	// 位置ヒント込み予想作成ループ（種類正順全てを位置正順で使用）
	for (IdxA = 0; IdxA < 4; IdxA++)
	{
		if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
		{
			Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
		}
	}
	// ヒント確認
	Ret = K_GetHint(Expect);
	// ヒントがなかったか
	if (Ret == undefined)
	{
		return Expect;
	}
	// 位置ヒント数カウント
	for (CntPosition = 0, IdxA = 0; IdxA < 4; IdxA++)
	{
		if (gPosition.charAt(IdxA) != "-")
		{
			CntPosition++;
		}
	}
	// 不要未採取か
	if (gNeedLess == "")
	{
		// 不要採取ループ
		for (IdxA = 0; IdxA < 10; IdxA++)
		{
			if (gNumber.indexOf(gaExpect[IdxA]) == -1)
			{
				gNeedLess += gaExpect[IdxA];
				if (gNeedLess.length == 3)
				{
					break;
				}
			}
		}
	}
	// Hit数で分岐
	switch (Ret.Hit)
	{
		case "0":
		{
			// 次予想作成
			Expect = gNumber.charAt(0) + gNeedLess;
			// ヒント確認
			Ret = K_GetHint(Expect);
			// ヒントがなかったか
			if (Ret == undefined)
			{
				return Expect;
			}
			// Hit数で分岐
			switch (Ret.Hit)
			{
				case "0":
				{
					// 次予想作成
					Expect = gNumber.charAt(1) + gNeedLess;
					// ヒント確認
					Ret = K_GetHint(Expect);
					// ヒントがなかったか
					if (Ret == undefined)
					{
						return Expect;
					}
					// Hit数で分岐
					switch (Ret.Hit)
					{
						case "0":
						{
							// 次予想作成
							Expect = gNumber.charAt(2) + gNeedLess;
							// ヒント確認
							Ret = K_GetHint(Expect);
							// ヒントがなかったか
							if (Ret == undefined)
							{
								return Expect;
							}
							// Hit数で分岐
							switch (Ret.Hit)
							{
								case "0":
								{
									gPosition = gNumber.charAt(3) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
									Ret = K_FindPosition();
									break;
								}
								case "1":
								{
									gPosition = gNumber.charAt(2) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
									Ret = K_FindPosition();
									break;
								}
								default:
								{
									return RET_ERROR;
								}
							}
							break;
						}
						case "1":
						{
							gPosition = gNumber.charAt(1) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
							Ret = K_FindPosition();
							break;
						}
						default:
						{
							return RET_ERROR;
						}
					}
					break;
				}
				case "1":
				{
					gPosition = gNumber.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
					Ret = K_FindPosition();
					break;
				}
				default:
				{
					return RET_ERROR;
				}
			}
			break;
		}
		case "1":
		{
			// 位置ヒント数で分岐
			switch (CntPosition)
			{
				case 0:
				{
					// 次予想作成
					Expect = gNumber.substr(0, 3) + gNeedLess.charAt(1);
					// ヒント確認
					Ret = K_GetHint(Expect);
					// ヒントがなかったか
					if (Ret == undefined)
					{
						return Expect;
					}
					// Hit数で分岐
					switch (Ret.Hit)
					{
						case "0":
						{
							gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gNumber.charAt(3);
							Ret = K_FindPosition();
							break;
						}
						case "1":
						{
							// 次予想作成
							Expect = gNumber.substr(0, 2) + gNeedLess.charAt(1) + gNumber.substr(3);
							// ヒント確認
							Ret = K_GetHint(Expect);
							// ヒントがなかったか
							if (Ret == undefined)
							{
								return Expect;
							}
							// Hit数で分岐
							switch (Ret.Hit)
							{
								case "0":
								{
									gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gNumber.charAt(2) + gPosition.charAt(3);
									Ret = K_FindPosition();
									break;
								}
								case "1":
								{
									// 次予想作成
									Expect = gNumber.substr(0, 1) + gNeedLess.charAt(1) + gNumber.substr(2);
									// ヒント確認
									Ret = K_GetHint(Expect);
									// ヒントがなかったか
									if (Ret == undefined)
									{
										return Expect;
									}
									// Hit数で分岐
									switch (Ret.Hit)
									{
										case "0":
										{
											gPosition = gPosition.charAt(0) + gNumber.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
											Ret = K_FindPosition();
											break;
										}
										case "1":
										{
											gPosition = gNumber.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
											Ret = K_FindPosition();
											break;
										}
										default:
										{
											return RET_ERROR;
										}
									}
									break;
								}
								default:
								{
									return RET_ERROR;
								}
							}
							break;
						}
						default:
						{
							return RET_ERROR;
						}
					}
					break;
				}
				case 1:
				{
					// 次予想作成
					Expect = gPosition;
					// 位置ヒント込み予想作成ループ（種類正順１つを位置正順で使用）
					for (IdxA = 0; IdxA < 4; IdxA++)
					{
						if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
						{
							Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
							break;
						}
					}
					Expect = Expect.substr(0, Expect.indexOf("-")) + gNeedLess.charAt(0) + Expect.substr(Expect.indexOf("-") + 1);
					Expect = Expect.substr(0, Expect.indexOf("-")) + gNeedLess.charAt(1) + Expect.substr(Expect.indexOf("-") + 1);
					// ヒント確認
					Ret = K_GetHint(Expect);
					// ヒントがなかったか
					if (Ret == undefined)
					{
						return Expect;
					}
					// Hit数で分岐
					switch (Ret.Hit)
					{
						case "1":
						{
							// 次予想作成
							Expect = gPosition;
							Limit = 0;
							// 位置ヒント込み予想作成ループ（種類正順２つを位置正順で使用）
							for (IdxA = 0; IdxA < 4; IdxA++)
							{
								if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
								{
									if (Limit == 1)
									{
										Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
										break;
									}
									else
									{
										Limit++;
									}
								}
							}
							Expect = Expect.substr(0, Expect.indexOf("-")) + gNeedLess.charAt(0) + Expect.substr(Expect.indexOf("-") + 1);
							Expect = Expect.substr(0, Expect.indexOf("-")) + gNeedLess.charAt(1) + Expect.substr(Expect.indexOf("-") + 1);
							// ヒント確認
							Ret = K_GetHint(Expect);
							// ヒントがなかったか
							if (Ret == undefined)
							{
								return Expect;
							}
							// Hit数で分岐
							switch (Ret.Hit)
							{
								case "1":
								{
									Limit = 0;
									// Hit位置探索ループ
									for (IdxA = 0; IdxA < 4; IdxA++)
									{
										if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
										{
											if (Limit == 2)
											{
												break;
											}
											else
											{
												Limit++;
											}
										}
									}
									// 数が足りないか
									if (Limit != 2)
									{
										return RET_ERROR;
									}
									gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
									Ret = K_FindPosition();
									break;
								}
								case "2":
								{
									Limit = 0;
									// Hit位置探索ループ
									for (IdxA = 0; IdxA < 4; IdxA++)
									{
										if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
										{
											if (Limit == 1)
											{
												break;
											}
											else
											{
												Limit++;
											}
										}
									}
									// 数が足りないか
									if (Limit != 1)
									{
										return RET_ERROR;
									}
									gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
									Ret = K_FindPosition();
									break;
								}
								default:
								{
									return RET_ERROR;
								}
							}
							break;
						}
						case "2":
						{
							// Hit位置探索ループ
							for (IdxA = 0; IdxA < 4; IdxA++)
							{
								if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
								{
									break;
								}
							}
							gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
							Ret = K_FindPosition();
							break;
						}
						default:
						{
							return RET_ERROR;
						}
					}
					break;
				}
				default:
				{
					return RET_ERROR;
				}
			}
			break;
		}
		case "2":
		{
			// 位置ヒント数で分岐
			switch (CntPosition)
			{
				case 0:
				{
					// 次予想作成
					Expect = gNumber.substr(0, 3) + gNeedLess.charAt(0);
					// ヒント確認
					Ret = K_GetHint(Expect);
					// ヒントがなかったか
					if (Ret == undefined)
					{
						return Expect;
					}
					// Hit数で分岐
					switch (Ret.Hit)
					{
						case "1":
						{
							gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gNumber.charAt(3);
							Ret = K_FindPosition();
							break;
						}
						case "2":
						{
							// 次予想作成
							Expect = gNumber.substr(0, 2) + gNeedLess.charAt(0) + gNumber.substr(3);
							// ヒント確認
							Ret = K_GetHint(Expect);
							// ヒントがなかったか
							if (Ret == undefined)
							{
								return Expect;
							}
							// Hit数で分岐
							switch (Ret.Hit)
							{
								case "1":
								{
									gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gNumber.charAt(2) + gPosition.charAt(3);
									Ret = K_FindPosition();
									break;
								}
								case "2":
								{
									// 次予想作成
									Expect = gNumber.substr(0, 1) + gNeedLess.charAt(0) + gNumber.substr(2);
									// ヒント確認
									Ret = K_GetHint(Expect);
									// ヒントがなかったか
									if (Ret == undefined)
									{
										return Expect;
									}
									// Hit数で分岐
									switch (Ret.Hit)
									{
										case "1":
										{
											gPosition = gPosition.charAt(0) + gNumber.charAt(0) + gPosition.charAt(2) + gPosition.charAt(3);
											Ret = K_FindPosition();
											break;
										}
										case "2":
										{
											gPosition = gNumber.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gPosition.charAt(3);
											Ret = K_FindPosition();
											break;
										}
										default:
										{
											return RET_ERROR;
										}
									}
									break;
								}
								default:
								{
									return RET_ERROR;
								}
							}
							break;
						}
						default:
						{
							return RET_ERROR;
						}
					}
					break;
				}
				case 1:
				{
					// 次予想作成
					Expect = gPosition;
					// 位置ヒント込み予想作成ループ（種類正順１つを位置正順で使用）
					for (IdxA = 0; IdxA < 4; IdxA++)
					{
						if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
						{
							Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
							break;
						}
					}
					// 位置ヒント込み予想作成ループ（種類正順２つを位置逆順で使用）
					for (; IdxA < 4; IdxA++)
					{
						if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
						{
							Expect = Expect.substr(0, Expect.lastIndexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.lastIndexOf("-") + 1);
						}
					}
					// ヒント確認
					Ret = K_GetHint(Expect);
					// ヒントがなかったか
					if (Ret == undefined)
					{
						return Expect;
					}
					// ２Hitか
					if (Ret.Hit == "2")
					{
						// ２Hitである
						// 位置ヒント更新ループ
						for (IdxA = 0; IdxA < 4; IdxA++)
						{
							if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
							{
								gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
								Ret = K_FindPosition();
								break;
							}
						}
					}
					else
					{
						// ２Hitではない
						// 次予想作成
						Expect = gPosition;
						// 位置ヒント込み予想作成ループ（種類逆順１つを位置逆順で使用）
						for (IdxA = 3; IdxA >= 0; IdxA--)
						{
							if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
							{
								Expect = Expect.substr(0, Expect.lastIndexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.lastIndexOf("-") + 1);
								break;
							}
						}
						// 位置ヒント込み予想作成ループ（種類正順２つを位置正順で使用）
						for (IdxA = 0; IdxA < 4; IdxA++)
						{
							if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
							{
								Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
							}
						}
						// ヒント確認
						Ret = K_GetHint(Expect);
						// ヒントがなかったか
						if (Ret == undefined)
						{
							return Expect;
						}
						// ２Hitか
						if (Ret.Hit)
						{
							// ２Hitである
							Limit = 0;
							// 位置ヒント更新ループ
							for (IdxA = 0; IdxA < 4; IdxA++)
							{
								if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
								{
									if (Limit == 2)
									{
										gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
										Ret = K_FindPosition();
										break;
									}
									else
									{
										Limit++;
									}
								}
							}
						}
						else
						{
							// ２Hitではない
							Limit = 0;
							// 位置ヒント更新ループ
							for (IdxA = 0; IdxA < 4; IdxA++)
							{
								if (gPosition.indexOf(gNumber.charAt(IdxA)) == -1)
								{
									if (Limit == 1)
									{
										gPosition = gPosition.substr(0, gPosition.indexOf("-")) + gNumber.charAt(IdxA) + gPosition.substr(gPosition.indexOf("-") + 1);
										Ret = K_FindPosition();
										break;
									}
									else
									{
										Limit++;
									}
								}
							}
						}
					}
					break;
				}
				case 2:
				{
					// 次予想作成
					Expect = gPosition;
					// 位置ヒント込み予想作成ループ（種類逆順２つを位置正順で使用）
					for (IdxA = 3; IdxA >= 0; IdxA--)
					{
						if (Expect.indexOf(gNumber.charAt(IdxA)) == -1)
						{
							Expect = Expect.substr(0, Expect.indexOf("-")) + gNumber.charAt(IdxA) + Expect.substr(Expect.indexOf("-") + 1);
						}
					}
					Ret = Expect;
					break;
				}
				default:
				{
					return RET_ERROR;
				}
			}
			break;
		}
		default:
		{
			return RET_ERROR;
		}
	}
	return Ret;
}

// 履歴取得
function K_GetHistory()
{
	var Loop;
	
	gaHistory = document.forms[0].pgm_try.value.split("\n");
	for (Loop = gaHistory.length - 1; Loop >= 0; Loop--)
	{
		// 実体があるか
		if (gaHistory[Loop].length == 20)
		{
			break;
		}
		gaHistory.pop();
	}
	gIdxHistory = 0;
}

// 種類探索
function K_FindNumber()
{
	var TotalA;
	var TotalB;
	var TotalF;
	var TotalM;
	var Hit;
	var HitA;
	var HitB;
	var Blow;
	
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[0] + gaExpect[1] + gaExpect[2] + gaExpect[3];
	}
	Hit = (gaHistory[gIdxHistory] + "").charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalF = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// 種類探索が終わったか
	if (TotalF >= 4)
	{
		gNumber += gaExpect[0] + "";
		gNumber += gaExpect[1] + "";
		gNumber += gaExpect[2] + "";
		gNumber += gaExpect[3] + "";
		// 位置ヒントもあるか
		if (Hit == 4)
		{
			gPosition = gaExpect[0] + gaExpect[1] + gaExpect[2] + gaExpect[3];
		}
		return STATUS_FIND_NUMBER_END;
	}
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[4] + gaExpect[5] + gaExpect[6] + gaExpect[7];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalM = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// 種類探索が終わったか
	if (TotalM >= 4)
	{
		gNumber += gaExpect[4] + "";
		gNumber += gaExpect[5] + "";
		gNumber += gaExpect[6] + "";
		gNumber += gaExpect[7] + "";
		// 位置ヒントもあるか
		if (Hit == 4)
		{
			gPosition = gaExpect[4] + gaExpect[5] + gaExpect[6] + gaExpect[7];
		}
		return STATUS_FIND_NUMBER_END;
	}
	// 前部で分岐
	switch (TotalF)
	{
		case 2:
		{
			// 中部にあるか
			if (TotalM != 0)
			{
				break;
			}
			Ret = K_CommonA(4, 0, 1, 2, 3);
			return Ret;
		}
		case 3:
		{
			// 中部にあるか
			if (TotalM == 1)
			{
				break;
			}
			// 中部にない場合に到達
			// 履歴がないか
			if (gIdxHistory >= gaHistory.length)
			{
				return gaExpect[4] + gaExpect[5] + gaExpect[6] + gaExpect[8];
			}
			Hit = gaHistory[gIdxHistory].charAt(8);
			Blow = gaHistory[gIdxHistory].charAt(14);
			gIdxHistory++;
			// 位置ヒントがあるか
			if (Hit == 1)
			{
				gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
			}
			// H8
			if (Hit * 1 + Blow * 1 == 1)
			{
				Ret = K_CommonB(8, 0, 1, 2, 3);
			}
			else
			{
				Ret = K_CommonB(9, 0, 1, 2, 3);
			}
			return Ret;
		}
		case 0:
		{
			// 中部で分岐
			switch (TotalM)
			{
				case 2:
				{
					Ret = K_CommonA(0, 4, 5, 6, 7);
					return Ret;
				}
				case 3:
				{
					// 履歴がないか
					if (gIdxHistory >= gaHistory.length)
					{
						return gaExpect[0] + gaExpect[1] + gaExpect[2] + gaExpect[8];
					}
					Hit = gaHistory[gIdxHistory].charAt(8);
					Blow = gaHistory[gIdxHistory].charAt(14);
					gIdxHistory++;
					// 位置ヒントがあるか
					if (Hit == 1)
					{
						gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
					}
					// H8
					if (Hit * 1 + Blow * 1 == 1)
					{
						Ret = K_CommonB(8, 4, 5, 6, 7);
					}
					else
					{
						Ret = K_CommonB(9, 4, 5, 6, 7);
					}
					return Ret;
				}
				default:
				{
					break;
				}
			}
			return STATUS_FIND_NUMBER_ERROR;
		}
		default:
		{
			break;
		}
	}
	// ３分散か、後部に含まれない場合に到達
	// 後部に含まれないか
	if (TotalF + TotalM >= 4)
	{
		// 前部で分岐
		switch (TotalF)
		{
			case 1:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[8] + gaExpect[9] + gaExpect[0] + gaExpect[1];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				HitA = Hit;
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[8] + gaExpect[9] + gaExpect[0] + gaExpect[2];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				HitB = Hit;
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalB = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// 位置ヒントがあるか
				if ((HitA == 1) && (HitB == 1))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gaExpect[0] + gPosition.charAt(3);
				}
				// 位置ヒントがあるか
				if ((HitA == 1) && (HitB == 0))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[1];
				}
				// 位置ヒントがあるか
				if ((HitA == 0) && (HitB == 1))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[2];
				}
				// A部にあるか
				if (TotalA == 1)
				{
					// ある
					// B部にあるか
					if (TotalB == 1)
					{
						// ある
						Ret = K_CommonB(0, 4, 5, 6, 7);
					}
					else
					{
						// ない
						Ret = K_CommonB(1, 4, 5, 6, 7);
					}
				}
				else
				{
					// ない
					// B部にあるか
					if (TotalB == 1)
					{
						// ある
						Ret = K_CommonB(2, 4, 5, 6, 7);
					}
					else
					{
						// ない
						Ret = K_CommonB(3, 4, 5, 6, 7);
					}
				}
				return Ret;
			}
			case 3:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[8] + gaExpect[9] + gaExpect[4] + gaExpect[5];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				HitA = Hit;
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[8] + gaExpect[9] + gaExpect[4] + gaExpect[6];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				HitB = Hit;
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalB = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// 位置ヒントがあるか
				if ((HitA == 1) && (HitB == 1))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gaExpect[4] + gPosition.charAt(3);
				}
				// 位置ヒントがあるか
				if ((HitA == 1) && (HitB == 0))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[5];
				}
				// 位置ヒントがあるか
				if ((HitA == 0) && (HitB == 1))
				{
					gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[6];
				}
				// A部にあるか
				if (TotalA == 1)
				{
					// ある
					// B部にあるか
					if (TotalB == 1)
					{
						// ある
						Ret = K_CommonB(4, 0, 1, 2, 3);
					}
					else
					{
						// ない
						Ret = K_CommonB(5, 0, 1, 2, 3);
					}
				}
				else
				{
					// ない
					// B部にあるか
					if (TotalB == 1)
					{
						// ある
						Ret = K_CommonB(6, 0, 1, 2, 3);
					}
					else
					{
						// ない
						Ret = K_CommonB(7, 0, 1, 2, 3);
					}
				}
				return Ret;
			}
			default:
			{
				break;
			}
		}
		// 前部と中部に２つずつの場合に到達
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[0] + gaExpect[1] + gaExpect[8] + gaExpect[9];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		TotalA = Hit * 1 + Blow * 1;
		gIdxHistory++;
		// A部で分岐
		switch (TotalA)
		{
			case 0:
			{
				gNumber += gaExpect[2] + "";
				gNumber += gaExpect[3] + "";
				break;
			}
			case 2:
			{
				gNumber += gaExpect[0] + "";
				gNumber += gaExpect[1] + "";
				break;
				// 位置ヒントもあるか
				if (Hit == 2)
				{
					gPosition = gaExpect[0] + gaExpect[1] + gPosition.charAt(2) + gPosition.charAt(3);
				}
			}
			default:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[0] + gaExpect[1] + gaExpect[2] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に１つか
				if (TotalA == 1)
				{
					// １つである
					gNumber += gaExpect[3] + "";
				}
				else
				{
					// １つではない
					gNumber += gaExpect[2] + "";
				}
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[2] + gaExpect[3] + gaExpect[0] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に１つか
				if (TotalA == 1)
				{
					// １つである
					gNumber += gaExpect[1] + "";
				}
				else
				{
					// １つではない
					gNumber += gaExpect[0] + "";
				}
				break;
			}
		}
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[4] + gaExpect[5] + gaExpect[8] + gaExpect[9];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		TotalA = Hit * 1 + Blow * 1;
		gIdxHistory++;
		// A部で分岐
		switch (TotalA)
		{
			case 0:
			{
				gNumber += gaExpect[6] + "";
				gNumber += gaExpect[7] + "";
				break;
			}
			case 2:
			{
				gNumber += gaExpect[4] + "";
				gNumber += gaExpect[5] + "";
				break;
				// 位置ヒントもあるか
				if (Hit == 2)
				{
					gPosition = gaExpect[4] + gaExpect[5] + gPosition.charAt(2) + gPosition.charAt(3);
				}
			}
			default:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[4] + gaExpect[5] + gaExpect[6] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に１つか
				if (TotalA == 1)
				{
					// １つである
					gNumber += gaExpect[7] + "";
				}
				else
				{
					// １つではない
					gNumber += gaExpect[6] + "";
				}
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[6] + gaExpect[7] + gaExpect[4] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に１つか
				if (TotalA == 1)
				{
					// １つである
					gNumber += gaExpect[5] + "";
				}
				else
				{
					// １つではない
					gNumber += gaExpect[4] + "";
				}
				break;
			}
		}
		return STATUS_FIND_NUMBER_END;
	}
	// ３分散の場合に到達
	// 前部に２つか
	if (TotalF == 2)
	{
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[0] + gaExpect[1] + gaExpect[8] + gaExpect[9];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		TotalA = Hit * 1 + Blow * 1;
		gIdxHistory++;
		// A部で分岐
		switch (TotalA)
		{
			case 1:
			{
				gNumber += gaExpect[2] + "";
				gNumber += gaExpect[3] + "";
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[2] + gaExpect[3] + gaExpect[0] + gaExpect[8];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に３つか
				if (TotalA == 3)
				{
					gNumber += gaExpect[8] + "";
					// 位置ヒントもあるか
					if (Hit == 3)
					{
						gPosition = gaExpect[2] + gaExpect[3] + gPosition.charAt(2) + gaExpect[8];
					}
					Ret = K_CommonC(2, 3, 8, 4, 5, 6, 7);
				}
				else
				{
					gNumber += gaExpect[9] + "";
					Ret = K_CommonC(2, 3, 9, 4, 5, 6, 7);
				}
				break;
			}
			case 3:
			{
				gNumber += gaExpect[0] + "";
				gNumber += gaExpect[1] + "";
				// 位置ヒントもあるか
				if (Hit == 3)
				{
					gPosition = gaExpect[0] + gaExpect[1] + gPosition.charAt(2) + gPosition.charAt(3);
				}
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[0] + gaExpect[1] + gaExpect[2] + gaExpect[8];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に３つか
				if (TotalA == 3)
				{
					gNumber += gaExpect[8] + "";
					// 位置ヒントもあるか
					if (Hit == 3)
					{
						gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
					}
					Ret = K_CommonC(0, 1, 8, 4, 5, 6, 7);
				}
				else
				{
					gNumber += gaExpect[9] + "";
					Ret = K_CommonC(0, 1, 9, 4, 5, 6, 7);
				}
				break;
			}
			default:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[0] + gaExpect[2] + gaExpect[8] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部で分岐
				switch (TotalA)
				{
					case 1:
					{
						gNumber += gaExpect[1] + "";
						gNumber += gaExpect[3] + "";
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[1] + gaExpect[3] + gaExpect[0] + gaExpect[8];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部に３つか
						if (TotalA == 3)
						{
							gNumber += gaExpect[8] + "";
							// 位置ヒントもあるか
							if (Hit == 3)
							{
								gPosition = gaExpect[1] + gaExpect[3] + gPosition.charAt(2) + gaExpect[8];
							}
							Ret = K_CommonC(1, 3, 8, 4, 5, 6, 7);
						}
						else
						{
							gNumber += gaExpect[9] + "";
							Ret = K_CommonC(1, 3, 9, 4, 5, 6, 7);
						}
						break;
					}
					case 3:
					{
						gNumber += gaExpect[0] + "";
						gNumber += gaExpect[2] + "";
						// 位置ヒントもあるか
						if (Hit == 3)
						{
							gPosition = gaExpect[0] + gaExpect[2] + gPosition.charAt(2) + gPosition.charAt(3);
						}
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[0] + gaExpect[2] + gaExpect[1] + gaExpect[8];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部に３つか
						if (TotalA == 3)
						{
							gNumber += gaExpect[8] + "";
							// 位置ヒントもあるか
							if (Hit == 3)
							{
								gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
							}
							Ret = K_CommonC(0, 2, 8, 4, 5, 6, 7);
						}
						else
						{
							gNumber += gaExpect[9] + "";
							Ret = K_CommonC(0, 2, 9, 4, 5, 6, 7);
						}
						break;
					}
					default:
					{
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[0] + gaExpect[3] + gaExpect[8] + gaExpect[9];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部で分岐
						switch (TotalA)
						{
							case 1:
							{
								gNumber += gaExpect[1] + "";
								gNumber += gaExpect[2] + "";
								// 履歴がないか
								if (gIdxHistory >= gaHistory.length)
								{
									return gaExpect[1] + gaExpect[2] + gaExpect[0] + gaExpect[8];
								}
								Hit = gaHistory[gIdxHistory].charAt(8);
								Blow = gaHistory[gIdxHistory].charAt(14);
								TotalA = Hit * 1 + Blow * 1;
								gIdxHistory++;
								// A部に３つか
								if (TotalA == 3)
								{
									gNumber += gaExpect[8] + "";
									// 位置ヒントもあるか
									if (Hit == 3)
									{
										gPosition = gaExpect[1] + gaExpect[2] + gPosition.charAt(2) + gaExpect[8];
									}
									Ret = K_CommonC(1, 2, 8, 4, 5, 6, 7);
								}
								else
								{
									gNumber += gaExpect[9] + "";
									Ret = K_CommonC(1, 2, 9, 4, 5, 6, 7);
								}
								break;
							}
							case 3:
							{
								gNumber += gaExpect[0] + "";
								gNumber += gaExpect[3] + "";
								// 位置ヒントもあるか
								if (Hit == 3)
								{
									gPosition = gaExpect[0] + gaExpect[3] + gPosition.charAt(2) + gPosition.charAt(3);
								}
								// 履歴がないか
								if (gIdxHistory >= gaHistory.length)
								{
									return gaExpect[0] + gaExpect[3] + gaExpect[0] + gaExpect[8];
								}
								Hit = gaHistory[gIdxHistory].charAt(8);
								Blow = gaHistory[gIdxHistory].charAt(14);
								TotalA = Hit * 1 + Blow * 1;
								gIdxHistory++;
								// A部に３つか
								if (TotalA == 3)
								{
									gNumber += gaExpect[8] + "";
									// 位置ヒントもあるか
									if (Hit == 3)
									{
										gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
									}
									Ret = K_CommonC(0, 3, 8, 4, 5, 6, 7);
								}
								else
								{
									gNumber += gaExpect[9] + "";
									Ret = K_CommonC(0, 3, 9, 4, 5, 6, 7);
								}
								break;
							}
							default:
							{
								return STATUS_FIND_NUMBER_ERROR;
							}
						}
						break;
					}
				}
				break;
			}
		}
		return Ret;
	}
	// ３分散で、前部に２つではない場合に到達
	// 中部に２つか
	if (TotalM == 2)
	{
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[4] + gaExpect[5] + gaExpect[8] + gaExpect[9];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		TotalA = Hit * 1 + Blow * 1;
		gIdxHistory++;
		// A部で分岐
		switch (TotalA)
		{
			case 1:
			{
				gNumber += gaExpect[6] + "";
				gNumber += gaExpect[7] + "";
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[6] + gaExpect[7] + gaExpect[4] + gaExpect[8];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に３つか
				if (TotalA == 3)
				{
					gNumber += gaExpect[8] + "";
					// 位置ヒントもあるか
					if (Hit == 3)
					{
						gPosition = gaExpect[6] + gaExpect[7] + gPosition.charAt(2) + gaExpect[8];
					}
					Ret = K_CommonC(6, 7, 8, 0, 1, 2, 3);
				}
				else
				{
					gNumber += gaExpect[9] + "";
					Ret = K_CommonC(6, 7, 9, 0, 1, 2, 3);
				}
				break;
			}
			case 3:
			{
				gNumber += gaExpect[4] + "";
				gNumber += gaExpect[5] + "";
				// 位置ヒントもあるか
				if (Hit == 3)
				{
					gPosition = gaExpect[4] + gaExpect[5] + gPosition.charAt(2) + gPosition.charAt(3);
				}
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[4] + gaExpect[5] + gaExpect[6] + gaExpect[8];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部に３つか
				if (TotalA == 3)
				{
					gNumber += gaExpect[8] + "";
					// 位置ヒントもあるか
					if (Hit == 3)
					{
						gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
					}
					Ret = K_CommonC(4, 5, 8, 0, 1, 2, 3);
				}
				else
				{
					gNumber += gaExpect[9] + "";
					Ret = K_CommonC(4, 5, 9, 0, 1, 2, 3);
				}
				break;
			}
			default:
			{
				// 履歴がないか
				if (gIdxHistory >= gaHistory.length)
				{
					return gaExpect[4] + gaExpect[6] + gaExpect[8] + gaExpect[9];
				}
				Hit = gaHistory[gIdxHistory].charAt(8);
				Blow = gaHistory[gIdxHistory].charAt(14);
				TotalA = Hit * 1 + Blow * 1;
				gIdxHistory++;
				// A部で分岐
				switch (TotalA)
				{
					case 1:
					{
						gNumber += gaExpect[5] + "";
						gNumber += gaExpect[7] + "";
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[5] + gaExpect[7] + gaExpect[4] + gaExpect[8];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部に３つか
						if (TotalA == 3)
						{
							gNumber += gaExpect[8] + "";
							// 位置ヒントもあるか
							if (Hit == 3)
							{
								gPosition = gaExpect[5] + gaExpect[7] + gPosition.charAt(2) + gaExpect[8];
							}
							Ret = K_CommonC(5, 7, 8, 0, 1, 2, 3);
						}
						else
						{
							gNumber += gaExpect[9] + "";
							Ret = K_CommonC(5, 7, 9, 0, 1, 2, 3);
						}
						break;
					}
					case 3:
					{
						gNumber += gaExpect[4] + "";
						gNumber += gaExpect[6] + "";
						// 位置ヒントもあるか
						if (Hit == 3)
						{
							gPosition = gaExpect[4] + gaExpect[6] + gPosition.charAt(2) + gPosition.charAt(3);
						}
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[4] + gaExpect[6] + gaExpect[5] + gaExpect[8];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部に３つか
						if (TotalA == 3)
						{
							gNumber += gaExpect[8] + "";
							// 位置ヒントもあるか
							if (Hit == 3)
							{
								gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
							}
							Ret = K_CommonC(4, 6, 8, 0, 1, 2, 3);
						}
						else
						{
							gNumber += gaExpect[9] + "";
							Ret = K_CommonC(4, 6, 9, 0, 1, 2, 3);
						}
						break;
					}
					default:
					{
						// 履歴がないか
						if (gIdxHistory >= gaHistory.length)
						{
							return gaExpect[4] + gaExpect[7] + gaExpect[8] + gaExpect[9];
						}
						Hit = gaHistory[gIdxHistory].charAt(8);
						Blow = gaHistory[gIdxHistory].charAt(14);
						TotalA = Hit * 1 + Blow * 1;
						gIdxHistory++;
						// A部で分岐
						switch (TotalA)
						{
							case 1:
							{
								gNumber += gaExpect[5] + "";
								gNumber += gaExpect[6] + "";
								// 履歴がないか
								if (gIdxHistory >= gaHistory.length)
								{
									return gaExpect[5] + gaExpect[6] + gaExpect[4] + gaExpect[8];
								}
								Hit = gaHistory[gIdxHistory].charAt(8);
								Blow = gaHistory[gIdxHistory].charAt(14);
								TotalA = Hit * 1 + Blow * 1;
								gIdxHistory++;
								// A部に３つか
								if (TotalA == 3)
								{
									gNumber += gaExpect[8] + "";
									// 位置ヒントもあるか
									if (Hit == 3)
									{
										gPosition = gaExpect[5] + gaExpect[6] + gPosition.charAt(2) + gaExpect[8];
									}
									Ret = K_CommonC(5, 6, 8, 0, 1, 2, 3);
								}
								else
								{
									gNumber += gaExpect[9] + "";
									Ret = K_CommonC(5, 6, 9, 0, 1, 2, 3);
								}
								break;
							}
							case 3:
							{
								gNumber += gaExpect[4] + "";
								gNumber += gaExpect[7] + "";
								// 位置ヒントもあるか
								if (Hit == 3)
								{
									gPosition = gaExpect[4] + gaExpect[7] + gPosition.charAt(2) + gPosition.charAt(3);
								}
								// 履歴がないか
								if (gIdxHistory >= gaHistory.length)
								{
									return gaExpect[4] + gaExpect[7] + gaExpect[5] + gaExpect[8];
								}
								Hit = gaHistory[gIdxHistory].charAt(8);
								Blow = gaHistory[gIdxHistory].charAt(14);
								TotalA = Hit * 1 + Blow * 1;
								gIdxHistory++;
								// A部に３つか
								if (TotalA == 3)
								{
									gNumber += gaExpect[8] + "";
									// 位置ヒントもあるか
									if (Hit == 3)
									{
										gPosition = gPosition.charAt(0) + gPosition.charAt(1) + gPosition.charAt(2) + gaExpect[8];
									}
									Ret = K_CommonC(4, 7, 8, 0, 1, 2, 3);
								}
								else
								{
									gNumber += gaExpect[9] + "";
									Ret = K_CommonC(4, 7, 9, 0, 1, 2, 3);
								}
								break;
							}
							default:
							{
								return STATUS_FIND_NUMBER_ERROR;
							}
						}
						break;
					}
				}
				break;
			}
		}
		return Ret;
	}
	// ３分散で、後部に２つの場合に到達
	gNumber += gaExpect[8] + "";
	gNumber += gaExpect[9] + "";
	Ret = K_CommonD(8, 9, 0, 1, 2, 3);
	// 回答をもらうか
	if (Ret != STATUS_FIND_NUMBER_CONTINUE)
	{
		return Ret;
	}
	Ret = K_CommonD(8, 9, 4, 5, 6, 7);
	// 回答をもらうか
	if (Ret != STATUS_FIND_NUMBER_CONTINUE)
	{
		return Ret;
	}
	return STATUS_FIND_NUMBER_END;
}

// 共通部D（必要２つ、不明４つ→必要１つ）
function K_CommonD(idxGood1, idxGood2, idx1, idx2, idx3, idx4)
{
	var TotalA;
	var TotalB;
	var Hit;
	var Blow;

	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idxGood1] + gaExpect[idxGood2] + gaExpect[idx1] + gaExpect[idx2];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalA = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// 位置ヒントもあるか
	if (Hit == 3)
	{
		gPosition = gaExpect[idxGood1] + gaExpect[idxGood2] + gPosition.charAt(2) + gPosition.charAt(3);
	}
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idxGood1] + gaExpect[idxGood2] + gaExpect[idx1] + gaExpect[idx3];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalB = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// 位置ヒントもあるか
	if (Hit == 3)
	{
		gPosition = gaExpect[idxGood1] + gaExpect[idxGood2] + gPosition.charAt(2) + gPosition.charAt(3);
	}
	// A部に３つか
	if (TotalA == 3)
	{
		// B部に３つか
		if (TotalB == 3)
		{
			gNumber += gaExpect[idx1] + "";
		}
		else
		{
			gNumber += gaExpect[idx2] + "";
		}
	}
	else
	{
		// B部に３つか
		if (TotalB == 3)
		{
			gNumber += gaExpect[idx3] + "";
		}
		else
		{
			gNumber += gaExpect[idx4] + "";
		}
	}
	return STATUS_FIND_NUMBER_CONTINUE;
}

// 共通部C（必要３つ、不明４つ→必要１つ）
function K_CommonC(idxGood1, idxGood2, idxGood3, idx1, idx2, idx3, idx4)
{
	var TotalA;
	var Hit;
	var Blow;

	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idxGood1] + gaExpect[idxGood2] + gaExpect[idxGood3] + gaExpect[idx1];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalA = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// A部に４つか
	if (TotalA == 4)
	{
		gNumber += gaExpect[idx1] + "";
		return STATUS_FIND_NUMBER_END;
	}
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idxGood1] + gaExpect[idxGood2] + gaExpect[idxGood3] + gaExpect[idx2];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalA = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// A部に４つか
	if (TotalA == 4)
	{
		gNumber += gaExpect[idx2] + "";
		return STATUS_FIND_NUMBER_END;
	}
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idxGood1] + gaExpect[idxGood2] + gaExpect[idxGood3] + gaExpect[idx3];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	TotalA = Hit * 1 + Blow * 1;
	gIdxHistory++;
	// A部に４つか
	if (TotalA == 4)
	{
		gNumber += gaExpect[idx3] + "";
	}
	else
	{
		gNumber += gaExpect[idx4] + "";
	}
	return STATUS_FIND_NUMBER_END;
}

// 共通部A（不要１つ、不明４つ→必要１つ）※前提条件：８、９必要
function K_CommonA(idxBad, idx1, idx2, idx3, idx4)
{
	gNumber += gaExpect[8] + "";
	gNumber += gaExpect[9] + "";
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[8] + gaExpect[9] + gaExpect[idxBad] + gaExpect[idx1];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	gIdxHistory++;
	// B8
	if (Hit * 1 + Blow * 1 == 3)
	{
		gNumber += gaExpect[idx1] + "";
		// 位置ヒントもあるか
		if (Hit == 3)
		{
			gPosition = gaExpect[8] + gaExpect[9] + gPosition.charAt(2) + gaExpect[idx1];
		}
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[8] + gaExpect[9] + gaExpect[idx2] + gaExpect[idxBad];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		gIdxHistory++;
		// B10
		if (Hit * 1 + Blow * 1 == 3)
		{
			gNumber += gaExpect[idx2] + "";
			// 位置ヒントもあるか
			if (Hit == 3)
			{
				gPosition = gaExpect[8] + gaExpect[9] + gaExpect[idx2] + gPosition.charAt(3);
			}
		}
		else
		{
			// 履歴がないか
			if (gIdxHistory >= gaHistory.length)
			{
				return gaExpect[8] + gaExpect[9] + gaExpect[idx3] + gaExpect[idxBad];
			}
			Hit = gaHistory[gIdxHistory].charAt(8);
			Blow = gaHistory[gIdxHistory].charAt(14);
			gIdxHistory++;
			// C12
			if (Hit * 1 + Blow * 1 == 3)
			{
				gNumber += gaExpect[idx3] + "";
				// 位置ヒントもあるか
				if (Hit == 3)
				{
					gPosition = gaExpect[8] + gaExpect[9] + gaExpect[idx3] + gPosition.charAt(3);
				}
			}
			else
			{
				gNumber += gaExpect[idx4] + "";
			}
		}
	}
	else
	{
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[8] + gaExpect[9] + gaExpect[idxBad] + gaExpect[idx2];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		gIdxHistory++;
		// E10
		if (Hit * 1 + Blow * 1 == 3)
		{
			gNumber += gaExpect[idx2] + "";
			// 位置ヒントもあるか
			if (Hit == 3)
			{
				gPosition = gaExpect[8] + gaExpect[9] + gPosition.charAt(2) + gaExpect[idx2];
			}
			// 履歴がないか
			if (gIdxHistory >= gaHistory.length)
			{
				return gaExpect[8] + gaExpect[9] + gaExpect[idx3] + gaExpect[idxBad];
			}
			Hit = gaHistory[gIdxHistory].charAt(8);
			Blow = gaHistory[gIdxHistory].charAt(14);
			gIdxHistory++;
			// E12
			if (Hit * 1 + Blow * 1 == 3)
			{
				gNumber += gaExpect[idx3] + "";
				// 位置ヒントもあるか
				if (Hit == 3)
				{
					gPosition = gaExpect[8] + gaExpect[9] + gaExpect[idx3] + gPosition.charAt(3);
				}
			}
			else
			{
				gNumber += gaExpect[idx4] + "";
			}
		}
		else
		{
			gNumber += gaExpect[idx3] + "";
			gNumber += gaExpect[idx4] + "";
		}
	}
	return STATUS_FIND_NUMBER_END;
}

// 共通部B（必要１つ、不明４つ→必要３つ）
function K_CommonB(idxGood, idx1, idx2, idx3, idx4)
{
	gNumber += gaExpect[idxGood] + "";
	// 履歴がないか
	if (gIdxHistory >= gaHistory.length)
	{
		return gaExpect[idx1] + gaExpect[idx2] + gaExpect[idx3] + gaExpect[idxGood];
	}
	Hit = gaHistory[gIdxHistory].charAt(8);
	Blow = gaHistory[gIdxHistory].charAt(14);
	gIdxHistory++;
	// H10
	if (Hit * 1 + Blow * 1 == 4)
	{
		gNumber += gaExpect[idx1] + "";
		gNumber += gaExpect[idx2] + "";
		gNumber += gaExpect[idx3] + "";
		// 位置ヒントもあるか
		if (Hit == 4)
		{
			gPosition = gaExpect[idx1] + gaExpect[idx2] + gaExpect[idx3] + gaExpect[idxGood];
		}
	}
	else
	{
		// 履歴がないか
		if (gIdxHistory >= gaHistory.length)
		{
			return gaExpect[idx1] + gaExpect[idx2] + gaExpect[idxGood] + gaExpect[idx4];
		}
		Hit = gaHistory[gIdxHistory].charAt(8);
		Blow = gaHistory[gIdxHistory].charAt(14);
		gIdxHistory++;
		// I12
		if (Hit * 1 + Blow * 1 == 4)
		{
			gNumber += gaExpect[idx1] + "";
			gNumber += gaExpect[idx2] + "";
			gNumber += gaExpect[idx4] + "";
			// 位置ヒントもあるか
			if (Hit == 4)
			{
				gPosition = gaExpect[idx1] + gaExpect[idx2] + gaExpect[idxGood] + gaExpect[idx4];
			}
		}
		else
		{
			// 履歴がないか
			if (gIdxHistory >= gaHistory.length)
			{
				return gaExpect[idx1] + gaExpect[idxGood] + gaExpect[idx3] + gaExpect[idx4];
			}
			Hit = gaHistory[gIdxHistory].charAt(8);
			Blow = gaHistory[gIdxHistory].charAt(14);
			gIdxHistory++;
			// J14
			if (Hit * 1 + Blow * 1 == 4)
			{
				gNumber += gaExpect[idx1] + "";
				gNumber += gaExpect[idx3] + "";
				gNumber += gaExpect[idx4] + "";
				// 位置ヒントもあるか
				if (Hit == 4)
				{
					gPosition = gaExpect[idx1] + gaExpect[idxGood] + gaExpect[idx3] + gaExpect[idx4];
				}
			}
			else
			{
				gNumber += gaExpect[idx2] + "";
				gNumber += gaExpect[idx3] + "";
				gNumber += gaExpect[idx4] + "";
			}
		}
	}
	return STATUS_FIND_NUMBER_END;
}

// プレイヤのヒントの検証
function K_VerifyYouHint()
{
	var Question;
	var aTry;
	var Loop;
	var Ret;
	var RetHint;
	var Tmp;
	
	Ret = "GOOD";
	Tmp = "";
	// 履歴がないか
	if (document.forms[0].pgm_try.value == "")
	{
		return;
	}
	// プレイヤの問題が入力されていないか
	if (document.forms[0].you_q.value == "")
	{
		alert("プレイヤの出題を入力して下さい。");
		return;
	}
	Question = document.forms[0].you_q.value.toUpperCase();
	aTry = document.forms[0].pgm_try.value.split("\n");
	// 検証ループ
	for (Loop = 0; Loop < aTry.length; Loop++)
	{
		// 履歴行ではないか
		if (aTry[Loop].length != 20)
		{
			continue;
		}
		RetHint = K_PgmHint(Question, aTry[Loop].substr(0, 4));
		if ((RetHint.Hit != aTry[Loop].charAt(8)) || (RetHint.Blow != aTry[Loop].charAt(14)))
		{
			Tmp += Loop + ",";
			Ret = "BAD";
		}
	}
	// 間違いがあったか
	if (Ret == "BAD")
	{
		alert("インデックス " + Tmp.substr(0, Tmp.length - 1) + " に間違いがあります。");
	}
	return Ret;
}
</script>
</head>
<body>
[動作確認]FireFox 3.6.23<br>
<br>
<table>
<tr>
	<td>
	<form>
	<input type="button" value="次ゲーム" onClick="K_PlayNext()"><br>
	<hr>
	<table summary="">
	<tr>
	
	<td>プログラムの予想</td>
	<td><input type="text" name="pgm_expect" value="" size="5" readonly></td>
	<td>→</td>
	<td>あなたのヒント<input type="text" name="you_hint_hit" value="" size="2">Hit　<input type="text" name="you_hint_blow" value="" size="2">Blow</td>
	
	</tr>
	<tr>
	
	<td>あなたの予想</td>
	<td><input type="text" name="you_expect" value="" size="5"></td>
	<td>→</td>
	<td>プログラムのヒントは試行履歴に表示<!-- <input type="text" name="pgm_hint_hit" value="" size="2" readonly>HIT　<input type="text" name="pgm_hint_blow" value="" size="2" readonly>BLOW
	 --></td>
	
	</tr>
	</table>
	<input type="button" value="次の試行へ" onClick="K_Try()"><br>
	<br>
	<table summary="">
	<tr><td><b>予想者</b></td><td>プログラム</td><td>あなた</td></tr>
	<tr><td><b>試行履歴</b></td><td><textarea name="pgm_try" rows="20" readonly>1234 -> 1 HIT 2 BLOW</textarea></td><td><textarea name="you_try" rows="20" readonly></textarea></td></tr>
	</table>
	<hr>
	あなたの勝敗は<input type="text" name="win" value="0" size="3" readonly>勝<input type="text" name="lose" value="0" size="3" readonly>負<input type="text" name="draw" value="0" size="3" readonly>分
	<input type="button" value="リセット" onClick="K_PlayReset()"><br>
	<br>
	あなたの出題<input type="text" name="you_q" value="" size="5"><input type="button" value="プレイヤのヒントの検証" onClick="K_VerifyYouHint()"><br>
	プログラムの出題<input type="text" name="pgm_q" value="" size="5" readonly><br>
	プログラムの予想テーブル<input type="text" name="expect_table" value="">
	</form>
	</td>
	
	<td valign="top">
	ヒントを頼りにして数字を当てる。<br>
	１０ゲームでいくつ勝ち越せるかな？<br>
	<br>
	【ルール】<br>
	・数字は４桁。　例　１２３、１２３４５　→　×<br>
	・Ｈｉｔは位置と種類が一致している個数のヒント、Ｂｌｏｗは種類だけが一致している個数のヒント。　例　出題が１２３４で予想が１３４５　→　１Ｈｉｔ、２Ｂｌｏｗ<br>
	・数字は、出題及び予想共に、同じ数字は使用できない。例　１２２３　→　×<br>
	・入力は半角で。　例　１　→　×<br>
	<br>
	【使い方】<br>
	１　ルールを満たす４桁の数字（＝プレイヤの出題）を考えて「次ゲーム」ボタンを押す。<br>
	２　プレイヤのヒントと予想を入力して「次の試行へ」ボタンを押す。<br>
	３　プログラムのヒントを頼りに、プレイヤかプログラムが当てるまで手順２の繰り返し。<br>
	４　勝負がついたら、ヒントの検証を行うために下部にプレイヤの出題を入力して手順１へ。
	</td>
</tr>
</table>

</body>
</html>
